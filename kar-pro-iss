- Using previously-installed hashicorp/tls v4.1.0
Partner and community providers are signed by their developers.
If you'd like to know more about provider signing, you can read about it here:
https://developer.hashicorp.com/terraform/cli/plugins/signing
╷
│ Error: Failed to query available provider packages
│
│ Could not retrieve the list of available versions for provider hashicorp/kubectl: provider registry registry.terraform.io does not have a provider named
│ registry.terraform.io/hashicorp/kubectl
│
│ Did you intend to use gavinbunney/kubectl? If so, you must specify that source address in each module which requires that provider. To see which modules
│ are currently depending on hashicorp/kubectl, run the following command:
│     terraform providers
╵
---------

module "eks" {
  source = "./modules/eks"
}
module "s3" {
  source = "./modules/s3"
}

module "aurora" {
  source = "./modules/db"
}

module "ingress_controller" {
  source       = "./modules/ingress-controller"
  cluster_name = "zpl-cmm"
  region       = "us-east-1"
  providers = {
    aws        = aws
    helm       = helm
    kubernetes = kubernetes
  }
  depends_on = [module.eks]
}

module "angular" {
  source     = "./modules/angular-app"
  depends_on = [module.ingress_controller, module.eks]
}

module "flask" {
  source            = "./modules/flask-app"
  oidc_provider_arn = module.eks.oidc_provider_arn
  oidc_provider_url = module.eks.oidc_provider_url
  db_secret_arn     = module.aurora.db_secret_arn
  depends_on        = [module.aurora, module.s3, module.eks, module.ingress_controller]
}
module "auth-svc" {
  source     = "./modules/auth-svc"
  depends_on = [module.aurora, module.s3, module.eks, module.ingress_controller]
}
module "gpu" {
  source            = "./modules/gpu"
  oidc_provider_arn = module.eks.oidc_provider_arn
  oidc_provider_url = module.eks.oidc_provider_url
  db_secret_arn     = module.aurora.db_secret_arn
  depends_on        = [module.aurora, module.s3, module.eks, module.ingress_controller]
}
module "karpenter" {
  source     = "./modules/karpenter"
  providers{
    kubectl = kubectl
  }
  depends_on = [module.eks]
}
-----------

Initializing the backend...
Initializing modules...
╷
│ Warning: Reference to undefined provider
│
│   on main.tf line 50, in module "karpenter":
│   50:     kubectl = kubectl.gavin
│
│ There is no explicit declaration for local provider name "kubectl" in module.karpenter, so Terraform is assuming you mean to pass a configuration for
│ "hashicorp/kubectl".
│
│ If you also control the child module, add a required_providers entry named "kubectl" with the source address "hashicorp/kubectl".
╵
╷
│ Error: Provider type mismatch
│
│   on main.tf line 50, in module "karpenter":
│   50:     kubectl = kubectl.gavin
│
│ The local name "kubectl.gavin" in the root module represents provider "gavinbunney/kubectl", but "kubectl" in module.karpenter represents
│ "hashicorp/kubectl".
│
│ Each provider has its own distinct configuration schema and provider types, so this module's "kubectl" can be assigned only a configuration for
│ hashicorp/kubectl, which is not required by module.karpenter.
------------

Providers required by configuration:
.
├── provider[registry.terraform.io/hashicorp/aws] ~> 5.0
├── provider[registry.terraform.io/hashicorp/kubernetes] ~> 2.23
├── provider[registry.terraform.io/hashicorp/helm] ~> 2.7
├── module.angular
│   └── provider[registry.terraform.io/hashicorp/helm]
├── module.aurora
│   ├── provider[registry.terraform.io/hashicorp/aws]
│   └── module.aurora
│       └── provider[registry.terraform.io/hashicorp/aws] >= 5.89.0
├── module.auth-svc
│   └── provider[registry.terraform.io/hashicorp/helm]
├── module.karpenter
│   ├── provider[registry.terraform.io/hashicorp/kubectl]
│   ├── provider[registry.terraform.io/hashicorp/helm]
│   ├── provider[registry.terraform.io/hashicorp/aws]
│   └── module.karpenter
│       └── provider[registry.terraform.io/hashicorp/aws] >= 5.95.0
├── module.s3
│   └── provider[registry.terraform.io/hashicorp/aws]
├── module.eks
│   ├── provider[registry.terraform.io/hashicorp/aws]
│   └── module.eks
│       ├── provider[registry.terraform.io/hashicorp/time] >= 0.9.0
│       ├── provider[registry.terraform.io/hashicorp/aws] >= 5.95.0
│       ├── provider[registry.terraform.io/hashicorp/tls] >= 3.0.0
│       ├── module.eks_managed_node_group
│           ├── provider[registry.terraform.io/hashicorp/aws] >= 5.95.0
│           └── module.user_data
│               ├── provider[registry.terraform.io/hashicorp/null] >= 3.0.0
│               └── provider[registry.terraform.io/hashicorp/cloudinit] >= 2.0.0
│       ├── module.fargate_profile
│           └── provider[registry.terraform.io/hashicorp/aws] >= 5.95.0
│       ├── module.kms
│           └── provider[registry.terraform.io/hashicorp/aws] >= 4.33.0
│       └── module.self_managed_node_group
│           ├── provider[registry.terraform.io/hashicorp/aws] >= 5.95.0
│           └── module.user_data
│               ├── provider[registry.terraform.io/hashicorp/cloudinit] >= 2.0.0
│               └── provider[registry.terraform.io/hashicorp/null] >= 3.0.0
├── module.flask
│   ├── provider[registry.terraform.io/hashicorp/aws]
│   ├── provider[registry.terraform.io/hashicorp/kubernetes]
│   └── provider[registry.terraform.io/hashicorp/helm]
├── module.gpu
│   ├── provider[registry.terraform.io/hashicorp/aws]
│   ├── provider[registry.terraform.io/hashicorp/kubernetes]
│   └── provider[registry.terraform.io/hashicorp/helm]
└── module.ingress_controller
    ├── provider[registry.terraform.io/hashicorp/aws]
    ├── provider[registry.terraform.io/hashicorp/kubernetes]
    └── provider[registry.terraform.io/hashicorp/helm]

Providers required by state:

    provider[registry.terraform.io/hashicorp/null]

    provider[registry.terraform.io/hashicorp/time]

    provider[registry.terraform.io/hashicorp/tls]

    provider[registry.terraform.io/hashicorp/aws]

    provider[registry.terraform.io/hashicorp/cloudinit]

    provider[registry.terraform.io/hashicorp/helm]

    provider[registry.terraform.io/hashicorp/kubernetes]
